---
title: Icarus主题配置日记
tags:
  - Hexo
  - Icarus
categories:
  - 折腾
  - 博客
date: 2022-01-15 16:04:59
updated: 2022-01-15 16:04:59
toc: true
---

{% raw %}
<style type="text/css">
.heimu { color: #7A7A7A; background-color: #7A7A7A; }
.heimu:hover { color: #fff; }
</style>
{% endraw %}

不知怎么发现了 [Icarus](https://github.com/ppoffice/hexo-theme-icarus) 这个主题，看起来不错，尝试改一改换上。

为了方便自定义，采用源码安装的形式。{% raw %}<span class="heimu">其实踩了遍直接 npm 安装的坑</span>{% endraw %}

本篇博客将和我自定义后的主题 [Icarus个人修改版](https://github.com/Centaurus99/hexo-theme-icarus) 保持同步更新~

<!-- more -->

## Icarus 安装

### 配置 Hexo

截至 2022-01-15，`Icarus` 还没有官方支持 `Hexo 6.0.0`，所以如果在这个时间点使用默认方式安装 `Hexo` 并装上了 `6.0.0` 版本的话，大概需要手动降级。

我是将 `package.json` 中将 `Hexo` 的版本从 `6.0.0` 改为了 `5.4.0`，然后 `npm update`。

然后在 `_config.yml` 中将主题改为 `Icarus`：

``` yml
theme: icarus
```

可以选择将不用的默认主题 `hexo-theme-landscape` 卸载掉

### 安装 Icarus

为了方便对主题单独进行管理，我先将主题 Fork 一份到自己的 Github 上，即 [Icarus个人修改版](https://github.com/Centaurus99/hexo-theme-icarus)，然后通过 git 子模块进入到博客中来。

在博客根目录下使用如下命令：

``` bash
git submodule add https://github.com/Centaurus99/hexo-theme-icarus.git themes/icarus
```

这样，即使到一台新设备上，也只需要在 clone 之后在项目目录下多一步 `git submodule update --init`，就能获取到主题了。

此时直接开始运行会发现缺少依赖，手动安装一下即可（直接 npm 安装也可能会遇到这个问题，参考 [Issue#855](https://github.com/ppoffice/hexo-theme-icarus/issues/855#issuecomment-812881200)）。

``` bash
npm install --save bulma-stylus@0.8.0 hexo-renderer-inferno@^0.1.3
```

## 配置 Icarus 主题

在 `themes/icarus/` 下没有配置文件的前提下（如果有就删了），可以先运行一下 `hexo server` ，会在博客根目录下自动生成 `_config.icarus.yml` 配置文件，在这里配置而不是主题目录下配置即可保持主题源码不含个人配置文件。

接着就可以对着 [官方文档](https://ppoffice.github.io/hexo-theme-icarus/Configuration/icarus%E7%94%A8%E6%88%B7%E6%8C%87%E5%8D%97-%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/) 配置自己的主题啦。

一些个性化的东西这里就不做记录了，记录一些功能的配置过程。

### 关于显示更新时间问题

这实际是不是主题配置相关内容，只是记录一下，如果使用 Git 管理博客源码，记得把 `_config.yml` 中的 `updated_option` 改为 `'date'`，这样显示的更新时间是由博客 `Front-matter` 标记中的 `updated` 决定的，而不是由文件修改时间决定。

### 使用二次开发后的主题

这里发现有个大佬对主题做了很多不错的修改 [大佬博客](https://www.alphalxy.com/2019/03/customize-icarus/)，可以提个 PR 到自己这儿来使用。[源码](https://github.com/AlphaLxy/hexo-theme-icarus)

这个代码直接使用可能会因为编码规范问题不通过 Code Linting 检查，`npm run lint` 可以查看问题，可以临时在 `package.json` 中的 `scripts > lint` 对应的命令里添加 --fix 尝试自动修复，剩下的问题就要手动修复了。

### 一些个性化修改

主要记录一下我的主题源码有什么额外的改动。

- [a05b870](https://github.com/Centaurus99/hexo-theme-icarus/commit/a05b870908b9777bfea4991cc402982a6b9f73e4) 为解决关于 Code Linting 的问题，对代码格式进行了一些修正
- [248a768](https://github.com/Centaurus99/hexo-theme-icarus/commit/248a76822d811115b6bf91db2d6d6451c3fc636b) 删除了 merge 过来的代码中的个人配置文件

## 参考

- <https://xiongyingqi.com/2019/02/01/use-git-submodules/>
- [https://ppoffice.github.io/hexo-theme-icarus/Configuration/icarus用户指南-主题配置/](https://ppoffice.github.io/hexo-theme-icarus/Configuration/icarus%E7%94%A8%E6%88%B7%E6%8C%87%E5%8D%97-%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/)
- <https://www.alphalxy.com/2019/03/customize-icarus/>
